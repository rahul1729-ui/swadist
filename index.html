<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swadist Namkeen - Crispy Channa Namkeen</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header>
    <img src="logo1.png" alt="Swadist Logo" class="logo">
    <div class="brand-text">
      <h1>SWADIST</h1>
      <p>Har Bite Mein Swad</p>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <h2>Crispy Channa Namkeen</h2>
    <p>Crunchy ‚Ä¢ Spicy ‚Ä¢ Delicious</p>
    <img src="channa.png" alt="Swadist Channa Namkeen">
    <a href="https://wa.me/919918579142" class="btn">Order on WhatsApp</a>
  </section>

  <!-- Products -->
  <section class="product-section">
    <h2 class="section-title">Our Products</h2>

    <div class="products-container">
      <!-- 100g Pack -->
      <div class="product-card" data-product="Swadist Channa Namkeen" data-size="100g" data-price="70">
        <img src="channa.png" alt="Swadist Channa Namkeen 100g" class="product-img">
        <h3>Swadist Channa Namkeen ‚Äì 100g</h3>
        <p class="price">‚Çπ70</p>
        <div class="btn-group">
          <a href="https://rzp.io/rzp/5OJCd7z" target="_blank" class="btn buy-btn">
            üõí Buy 100g ‚Äì ‚Çπ70
          </a>
          <button class="btn order-btn">üì¶ Order with Delivery</button>
          <a href="https://wa.me/919918579142" target="_blank" class="btn whatsapp-btn">
            üí¨ Order on WhatsApp
          </a>
        </div>
      </div>

      <!-- 200g Pack -->
      <div class="product-card" data-product="Swadist Channa Namkeen" data-size="200g" data-price="120">
        <img src="channa.png" alt="Swadist Channa Namkeen 200g" class="product-img">
        <h3>Swadist Channa Namkeen ‚Äì 200g</h3>
        <p class="price">‚Çπ120</p>
        <div class="btn-group">
          <a href="https://rzp.io/rzp/3ZE938af" target="_blank" class="btn buy-btn">
            üõí Buy 200g ‚Äì ‚Çπ120
          </a>
          <button class="btn order-btn">üì¶ Order with Delivery</button>
          <a href="https://wa.me/919918579142" target="_blank" class="btn whatsapp-btn">
            üí¨ Order on WhatsApp
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- About -->
  <section class="about">
    <h2>About Swadist</h2>
    <p>
      At Swadist, we bring you authentic Indian flavors made with 
      love and hygiene. Our Channa Namkeen is crunchy, spicy, and 
      preservative-free ‚Äì perfect for every snack lover.
    </p>
  </section>

  <!-- Contact -->
  <section class="contact">
    <h2>Contact Us</h2>
    <p>üìç Khargupur Bazar, Gonda</p>
    <p>üìû +91-6307474558</p>
    <p>‚úâ swdistfoods@gmail.com</p>
    <a href="https://wa.me/919918579142" class="btn">Chat on WhatsApp</a>
  </section>

  <!-- Footer -->
  <footer>
    <p>¬© 2025 Swadist Foods | All Rights Reserved</p>
  </footer>

  <!-- ===== Order Modal ===== -->
  <div class="modal" id="orderModal" aria-hidden="true">
    <div class="modal-content">
      <button class="close-modal" id="closeModal">‚úñ</button>
      <h3>Delivery Details</h3>
      <p class="muted">Fill your details to place the order.</p>

      <form id="orderForm">
        <div class="row">
          <div class="field">
            <label>Product</label>
            <input type="text" id="product" name="product" readonly>
          </div>
          <div class="field">
            <label>Size</label>
            <input type="text" id="size" name="size" readonly>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Price (‚Çπ)</label>
            <input type="text" id="price" name="price" readonly>
          </div>
          <div class="field">
            <label>Quantity</label>
            <input type="number" id="quantity" name="quantity" value="1" min="1" required>
          </div>
        </div>

        <div class="field">
          <label>Full Name</label>
          <input type="text" id="name" name="name" required>
        </div>
        <div class="row">
          <div class="field">
            <label>Phone</label>
            <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" required>
          </div>
          <div class="field">
            <label>Pincode</label>
            <input type="text" id="pincode" name="pincode" pattern="[0-9]{6}" required>
          </div>
        </div>

        <div class="field">
          <label>Address</label>
          <textarea id="address" name="address" rows="3" required></textarea>
        </div>

        <div class="field">
          <label>Notes (optional)</label>
          <input type="text" id="notes" name="notes" placeholder="Landmark, delivery time‚Ä¶">
        </div>

        <div class="row">
          <div class="field">
            <label>Payment Method</label>
            <select id="paymentMethod" name="paymentMethod">
              <option value="Cash on Delivery">Cash on Delivery</option>
              <option value="Online (Razorpay Link)">Online (Razorpay Link)</option>
            </select>
          </div>
          <div class="field">
            <label>Order ID</label>
            <input type="text" id="orderId" name="orderId" readonly>
          </div>
        </div>

        <button type="submit" class="btn submit-btn">‚úÖ Place Order</button>
      </form>
      <p class="small muted">After submit, you‚Äôll be redirected to WhatsApp to confirm.</p>
    </div>
  </div>

  <!-- ===== Scripts ===== -->
  <script>
    // 1) Put your Google Apps Script Web App URL here:
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxeVCxQY8MvuZ25wdt4n3gS-msU3Wx64vWtKP3-I5-SwaPr-sY27oy0rWE-6zTGE8JIEQ/exec";

    // Generate simple Order ID
    function makeOrderId() {
      const n = Math.floor(Math.random() * 9000) + 1000;
      return "SWD" + Date.now().toString().slice(-6) + n;
    }

    const modal = document.getElementById('orderModal');
    const closeModal = document.getElementById('closeModal');
    const form = document.getElementById('orderForm');

    // Open modal from any product card
    document.querySelectorAll('.order-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const card = e.target.closest('.product-card');
        document.getElementById('product').value = card.dataset.product;
        document.getElementById('size').value = card.dataset.size;
        document.getElementById('price').value = card.dataset.price;
        document.getElementById('orderId').value = makeOrderId();
        modal.setAttribute('aria-hidden', 'false');
      });
    });

    closeModal.addEventListener('click', () => {
      modal.setAttribute('aria-hidden', 'true');
      form.reset();
    });

    // Submit to Google Sheet, then open WhatsApp with pre-filled message
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const data = {
        orderId: document.getElementById('orderId').value,
        product: document.getElementById('product').value,
        size: document.getElementById('size').value,
        price: document.getElementById('price').value,
        quantity: document.getElementById('quantity').value,
        name: document.getElementById('name').value,
        phone: document.getElementById('phone').value,
        address: document.getElementById('address').value,
        pincode: document.getElementById('pincode').value,
        paymentMethod: document.getElementById('paymentMethod').value,
        notes: document.getElementById('notes').value || ""
      };

      try {
        await fetch(SCRIPT_URL, {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
      } catch (err) {
        console.warn("Sheet submit error (will still open WhatsApp):", err);
      }

      // Open WhatsApp with order summary for confirmation
      const summary =
`Hello Swadist! I placed an order.
Order ID: ${data.orderId}
Product: ${data.product} (${data.size})
Price: ‚Çπ${data.price}
Qty: ${data.quantity}
Name: ${data.name}
Phone: ${data.phone}
Address: ${data.address}
Pincode: ${data.pincode}
Payment: ${data.paymentMethod}
Notes: ${data.notes}`;

      const phone = "919918579142";
      const wurl = "https://wa.me/" + phone + "?text=" + encodeURIComponent(summary);
      window.open(wurl, "_blank");

      modal.setAttribute('aria-hidden', 'true');
      form.reset();
    });
  </script>
</body>
</html>
